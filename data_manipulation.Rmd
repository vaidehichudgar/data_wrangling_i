---
title: "data_manipulation"
output: github_document
date: "2025-09-18"
---

```{r}
library(tidyverse)
```

Let's import datasets.

```{r}
litters_df=
  read_csv("dataset/FAS_litters.csv", na = c("NA", "", "."))
litters_df = 
    janitor::clean_names(litters_df)
pups_df = 
    read_csv("dataset/FAS_pups.csv",
        na = c(".", "NA", ""), 
        skip = 3)
pups_df = 
    janitor::clean_names(pups_df)
```

## `Select`

`select` selects variables from my dataframe.

Create new dataframe with just the following variables.
```{r}
select(litters_df, group, litter_number, gd0_weight)
```

select a range
```{r}
select(litters_df, group:gd_of_birth) #keeps variables from group to gd of birth
```

select by deletion
```{r}
select(litters_df, -group) #getting rid of group variable
select(litters_df, -group:gd_of_birth) #get rid of this range of variables
```

select by prefix 
```{r}
select(litters_df, group, starts_with("gd")) #keeping everything that starts with gd in this case
```

rearrange by selecting
```{r}
select(litters_df, starts_with("gd"), group) #returns dataframe in the order you have listed
select(litters_df, litter_number, everything()) #moving litter_number before everything else

relocate(litters_df, litter_number) #relocate is the same as above to move litter_number first
```

rename by selecting
```{r}
select(litters_df, GROUP = group, everything()) #renaming group to GROUP
rename(litters_df, GROUP = group) #same as above
```

what is i only select one variable
```{r}
select(litters_df, group) #just selecting group here, returns dataframe with just group

pull(litters_df, group) # you end up getting a vector here. 
                        #don't use a pull function!!! keep things in a dataframe
```


LA 1 code
```{r - Learning Assessment 1}
select(pups_df, litter_number, sex, pd_ears)
```

## filter

use `filter` to filter out rows.

Here, keep only gd_of_birth = 20 and where pups born alive = 6.
```{r}
filter(litters_df, gd_of_birth == 20, pups_born_alive == 6) #two equal signs
```

look for more than five pups alive
```{r}
filter(litters_df, pups_born_alive >= 5)
filter(litters_df, pups_born_alive > 5)
filter(litters_df, pups_born_alive < 5)
filter(litters_df, pups_born_alive != 5) # not equal to 5

```

match to a set
```{r}
filter(litters_df, group %in% c("Con7", "Con8")) #selecting rows based on character variable
```

filter missing rows with `drop_na()`

```{r}
drop_na(litters_df) #drops all rows with NA in any columns
drop_na(litters_df, gd0_weight) #drops all rows with NA in gd0_weight
```

Learning assessment 2
```{r}
filter(pups_df, sex == 1)
filter(pups_df, pd_walk< 11, sex ==2)
```


## mutate
use `mutate()` to create or modify variables.

```{r}
mutate(
  litters_df,
  wt_gain = gd18_weight - gd0_weight, # creating new wt_gain variable
  group = str_to_lower(group) #this function makes string variables lowercase
)
```

## arange

`arange()` arranges things

```{r}
arrange(litters_df, pups_born_alive) #orders by pups_born_alive
arrange(litters_df, desc(pups_born_alive)) #orders by pups_born_alive opposite order
arrange(litters_df, group, pups_born_alive)
arrange(litters_df, gd0_weight)
```

## Pipes


Use pipes
```{r}
litters_df = 
  read_csv("dataset/FAS_litters.csv", na = c("NA", ".", "")) |> 
  janitor::clean_names() |> #don't have to include litters_df here bc R knows you are talking about litters_df
  select(group, litter_number, starts_with("gd")) |> 
  drop_na() |> 
  mutate(
    wt_gain = gd18_weight - gd0_weight
  )
```

Learning Assessment 2

```{r}
pups_df =
  read_csv("dataset/FAS_pups.csv", skip = 3, na = c("NA", "", ".")) |> 
  janitor::clean_names() |> 
  filter(sex == 1) |> 
  select(-pd_ears) |> 
  mutate(pd_pivot_morethan7 = pd_pivot >= 7)

```






